\label{sec:feeds}

In order for settlements to convert any smartcoin into the core asset (e.g. BTS
in the BitShares network) at a fair price, the blockchain needs to be aware of
the external price of BTS.

In BitShares, this is achieved by means of a set of $N$ trusted
\emph{delegates}. These delegates have to be elected by the corresponding
BitShares shareholders (e.g. holders of BTS) and can be constantly reviewed as
all prices are put on the blockchain in a public manner by means of
transactions of a certain type. Hence, misbehaving delegates can be identified,
``fired'' and lose their reputation of shareholders.

Additionally, to prevent manipulation of the price feed, $N$ delegates have to
be elected that can all produce their prices independently. Having a set of $N$
prices $p_i,\;1<i<N$ for an arbitrary MPA on the blockchain, the protocol
obtains a single price $\tilde{p}$ by the use of the \emph{median} according
to:
\begin{align}
 x &= \operatorname{sort}(p[i])\\
 \tilde p &=\begin{cases}
   x[\frac{N+1}{2}]                                               & N \text{ odd}\\
   \frac {1}{2}\left(x[{\frac{N}{2}}] + x[\frac{N}{2} + 1]\right) & N \text{ even.}
 \end{cases}
\end{align}
Hence, the price is resistant against misbehaving delegates in such as only a
majority of price publishers can manipulate the outcome of the median. In
practice, any unintentional feed \emph{error} is thus balanced around the true
price. % FIXME later, show some statistics from bts-0.9

Obviously, the shareholders are required to constantly monitor the published
prices of their delegates and should make public note about discrepancies. This
is similar to traditional \emph{quality management} for the \emph{smartcoin}
products (e.g. bitUSD) and BitShares can offer a position in that regard.
